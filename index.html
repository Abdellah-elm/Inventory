<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connexion - Système de Gestion des Stocks</title>
    
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Login Styles -->
    <link rel="stylesheet" href="login.css">
</head>
<body>
    <!-- Animated Background -->
    <div class="login-background">
        <div class="shape shape-1"></div>
        <div class="shape shape-2"></div>
        <div class="shape shape-3"></div>
        <div class="particles" id="particles"></div>
    </div>

    <!-- Login Container -->
    <div class="login-wrapper">
        <div class="login-card">
            <!-- Logo & Header -->
            <div class="login-header">
                <div class="logo-container">
                    <div class="logo-circle">
                        <i class="fas fa-warehouse"></i>
                    </div>
                    <div class="logo-glow"></div>
                </div>
                <h1 class="login-title">Bienvenue</h1>
                <p class="login-subtitle">Système de Gestion des Stocks</p>
            </div>

            <!-- Login Form -->
            <form id="loginForm" class="login-form">
                <div class="form-group">
                    <div class="input-wrapper">
                        <i class="fas fa-user input-icon"></i>
                        <input 
                            type="text" 
                            id="username" 
                            class="form-input" 
                            placeholder="Nom d'utilisateur"
                            required
                            autocomplete="username"
                        >
                        <span class="input-border"></span>
                    </div>
                </div>

                <div class="form-group">
                    <div class="input-wrapper">
                        <i class="fas fa-lock input-icon"></i>
                        <input 
                            type="password" 
                            id="password" 
                            class="form-input" 
                            placeholder="Mot de passe"
                            required
                            autocomplete="current-password"
                        >
                        <button type="button" class="password-toggle" id="togglePassword">
                            <i class="fas fa-eye"></i>
                        </button>
                        <span class="input-border"></span>
                    </div>
                </div>

                <div class="form-options">
                    <label class="checkbox-container">
                        <input type="checkbox" id="rememberMe">
                        <span class="checkmark"></span>
                        <span class="checkbox-label">Se souvenir de moi</span>
                    </label>
                    <a href="#" class="forgot-password">Mot de passe oublié ?</a>
                </div>

                <button type="submit" class="login-button" id="loginBtn">
                    <span class="button-text">Se connecter</span>
                    <span class="button-loader" style="display: none;">
                        <i class="fas fa-spinner fa-spin"></i>
                    </span>
                    <div class="button-shine"></div>
                </button>

                <div class="alert alert-error" id="errorAlert" style="display: none;">
                    <i class="fas fa-exclamation-circle"></i>
                    <span id="errorMessage">Identifiants incorrects</span>
                </div>
            </form>

            <!-- Demo Credentials -->
            <div class="demo-credentials">
                <div class="demo-header">
                    <i class="fas fa-info-circle"></i>
                    <span>Compte de démonstration</span>
                </div>
                <div class="demo-list">
                    <div class="demo-item" onclick="fillCredentials('admin', 'admin')">
                        <i class="fas fa-user-shield"></i>
                        <div>
                            <strong>Administrateur</strong>
                            <span>admin / admin</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <div class="login-footer">
                <p>&copy; 2025 Système de Gestion des Stocks. Tous droits réservés.</p>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // Generate particles animation
        function createParticles() {
            const container = document.getElementById('particles');
            if (!container) return;
            const particleCount = 50;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 20 + 's';
                particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
                container.appendChild(particle);
            }
        }
        createParticles();

        // Password toggle
        document.getElementById('togglePassword').addEventListener('click', function() {
            const passwordInput = document.getElementById('password');
            const icon = this.querySelector('i');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                passwordInput.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        });

        // Fill credentials function
        function fillCredentials(username, password) {
            document.getElementById('username').value = username;
            document.getElementById('password').value = password;
            
            document.querySelectorAll('.form-input').forEach(input => {
                input.parentElement.classList.add('filled');
            });
        }

        // Login form submission
        document.getElementById('loginForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value.trim();
            const rememberMe = document.getElementById('rememberMe').checked;
            const errorAlert = document.getElementById('errorAlert');
            const loginBtn = document.getElementById('loginBtn');
            const buttonText = loginBtn.querySelector('.button-text');
            const buttonLoader = loginBtn.querySelector('.button-loader');
            
            // Hide error
            errorAlert.style.display = 'none';
            
            // Show loading
            buttonText.style.display = 'none';
            buttonLoader.style.display = 'inline-block';
            loginBtn.disabled = true;
            
            // Simulate network delay
            await new Promise(resolve => setTimeout(resolve, 800));
            
            // Simple validation
            if (username === 'admin' && password === 'admin') {
                // Success animation
                loginBtn.classList.add('success');
                buttonLoader.innerHTML = '<i class="fas fa-check"></i>';
                
                // Save session
                const userData = {
                    username: username,
                    loginTime: new Date().toISOString(),
                    rememberMe: rememberMe
                };
                
                if (rememberMe) {
                    localStorage.setItem('currentUser', JSON.stringify(userData));
                } else {
                    sessionStorage.setItem('currentUser', JSON.stringify(userData));
                }
                
                // Redirect to dashboard
                setTimeout(() => {
                    window.location.href = './dashboard.html';
                }, 1000);
            } else {
                // Error
                buttonText.style.display = 'inline-block';
                buttonLoader.style.display = 'none';
                loginBtn.disabled = false;
                loginBtn.classList.add('error');
                
                errorAlert.style.display = 'flex';
                errorAlert.style.animation = 'shake 0.5s';
                
                setTimeout(() => {
                    loginBtn.classList.remove('error');
                    errorAlert.style.animation = '';
                }, 1000);
            }
        });

        // Input animation
        document.querySelectorAll('.form-input').forEach(input => {
            input.addEventListener('focus', function() {
                this.parentElement.classList.add('focused');
            });
            
            input.addEventListener('blur', function() {
                if (!this.value) {
                    this.parentElement.classList.remove('focused', 'filled');
                } else {
                    this.parentElement.classList.add('filled');
                    this.parentElement.classList.remove('focused');
                }
            });
        });
    </script>
</body>
</html>
